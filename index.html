
<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Web Neural Network API</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in §N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .assertion  for assertions                    (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	  padding: .5em;
	  border: thin solid #ddd; border-radius: .5em;
	  margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	  margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	  margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: medium;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	.assertion,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		background: #EEE;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
		border-bottom-width: 3px !important;
		margin-bottom: 0px !important;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li .secno { font-size: 85%; }
	.toc > li li li li li { font-size:   85%;    }
	.toc > li li li li li .secno { font-size: 100%; }

	/* @supports not (display:grid) { */
		.toc > li             { margin: 1.5rem 0;    }
		.toc > li li          { margin: 0.3rem 0;    }
		.toc > li li li       { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}

		.toc li {
			clear: both;
		}

		:not(li) > .toc              { margin-left:  5rem; }
		.toc .secno                  { margin-left: -5rem; }
		.toc > li li li .secno       { margin-left: -7rem; }
		.toc > li li li li .secno    { margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc              { margin-left:  4rem; }
			.toc .secno                  { margin-left: -4rem; }
			.toc > li li li              { margin-left:  1rem; }
			.toc > li li li .secno       { margin-left: -5rem; }
			.toc > li li li li .secno    { margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			   comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover {
			background: rgba(75%, 75%, 75%, .25);
			border-bottom: 3px solid #054572;
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good table positioning:
		   "content column" is 50ems wide at max; less on smaller screens.
		   Extra space (after ToC + content) is empty on the right.

		   1. When table < content column, centers table in column.
		   2. When content < table < available, left-aligns.
		   3. When table > available, fills available + scroll bar.
		*/ 
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version c80ee3ab, updated Thu Mar 26 10:21:28 2020 -0700" name="generator">
  <link href="https://webmachinelearning.github.io/webnn/" rel="canonical">
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: #005a9c;
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: #DDDDDD;
    color: black;
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: black; }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: gray;
    color: white;
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: black;
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-syntax-highlighting */
pre.idl.highlight { color: #708090; }
.highlight:not(.idl) { background: hsl(24, 20%, 95%); }
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">Web Neural Network API</h1>
<<<<<<< HEAD
<<<<<<< HEAD
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Draft Community Group Report, <time class="dt-updated" datetime="2020-03-24">24 March 2020</time></span></h2>
=======
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Draft Community Group Report, <time class="dt-updated" datetime="2020-03-18">18 March 2020</time></span></h2>
>>>>>>> Update CompilationPreference to follow WebGL convention for context creation. Update the code sample to show how a certain compilation could fail such as when the model uses data type not supported by the hardware, and how to recover from the failure.
=======
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Draft Community Group Report, <time class="dt-updated" datetime="2020-04-01">1 April 2020</time></span></h2>
>>>>>>> Update according to feedbacks and to align more closely with WebGL.
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://webmachinelearning.github.io/webnn/">https://webmachinelearning.github.io/webnn/</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/webmachinelearning/webnn/issues/">GitHub</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard" data-editor-id="68202"><span class="p-name fn">Ningxin Hu</span> (<a class="p-org org" href="https://intel.com">Intel Corporation</a>)
     <dd class="editor p-author h-card vcard" data-editor-id="120203"><span class="p-name fn">Chai Chaoweeraprasit</span> (<a class="p-org org" href="https://microsoft.com">Microsoft Corporation</a>)
     <dt>Explainer:
     <dd><a href="https://github.com/webmachinelearning/webnn/blob/master/explainer.md">explainer.md</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2020 the Contributors to the Web Neural Network API Specification, published by the <a href="https://www.w3.org/community/webmachinelearning/">Machine Learning for the Web Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document describes a dedicated low-level API for neural network inference hardware acceleration.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/webmachinelearning/">Machine Learning for the Web Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#usecases"><span class="secno">2</span> <span class="content">Use cases</span></a>
     <ol class="toc">
      <li>
       <a href="#usecases-application"><span class="secno">2.1</span> <span class="content">Application Use Cases</span></a>
       <ol class="toc">
        <li><a href="#usecase-person-detection"><span class="secno">2.1.1</span> <span class="content">Person Detection</span></a>
        <li><a href="#usecase-segmentation"><span class="secno">2.1.2</span> <span class="content">Semantic Segmentation</span></a>
        <li><a href="#usecase-skeleton-detection"><span class="secno">2.1.3</span> <span class="content">Skeleton Detection</span></a>
        <li><a href="#usecase-face-recognition"><span class="secno">2.1.4</span> <span class="content">Face Recognition</span></a>
        <li><a href="#usecase-facial-landmarks"><span class="secno">2.1.5</span> <span class="content">Facial Landmark Detection</span></a>
        <li><a href="#usecase-style-transfer"><span class="secno">2.1.6</span> <span class="content">Style Transfer</span></a>
        <li><a href="#usecase-super-resolution"><span class="secno">2.1.7</span> <span class="content">Super Resolution</span></a>
        <li><a href="#usecase-image-captioning"><span class="secno">2.1.8</span> <span class="content">Image Captioning</span></a>
        <li><a href="#usecase-translation"><span class="secno">2.1.9</span> <span class="content">Machine Translation</span></a>
        <li><a href="#usecase-emotion-analysis"><span class="secno">2.1.10</span> <span class="content">Emotion Analysis</span></a>
        <li><a href="#usecase-video-summalization"><span class="secno">2.1.11</span> <span class="content">Video Summarization</span></a>
       </ol>
      <li>
       <a href="#usecases-framework"><span class="secno">2.2</span> <span class="content">Framework Use Cases</span></a>
       <ol class="toc">
        <li><a href="#usecase-custom-layer"><span class="secno">2.2.1</span> <span class="content">Custom Layer</span></a>
        <li><a href="#usecase-network-concat"><span class="secno">2.2.2</span> <span class="content">Network Concatenation</span></a>
        <li><a href="#usecase-perf-adapt"><span class="secno">2.2.3</span> <span class="content">Performance Adaptation</span></a>
       </ol>
     </ol>
    <li>
     <a href="#api"><span class="secno">3</span> <span class="content">API</span></a>
     <ol class="toc">
      <li><a href="#api-navigator"><span class="secno">3.1</span> <span class="content">Navigator</span></a>
      <li><a href="#api-ml"><span class="secno">3.2</span> <span class="content">ML</span></a>
      <li><a href="#api-operanddescriptor"><span class="secno">3.3</span> <span class="content">OperandDescriptor</span></a>
      <li><a href="#api-operand"><span class="secno">3.4</span> <span class="content">Operand</span></a>
      <li>
       <a href="#api-neuralnetworkcontext"><span class="secno">3.5</span> <span class="content">NeuralNetworkContext</span></a>
       <ol class="toc">
        <li><a href="#api-neuralnetworkcontext-add"><span class="secno">3.5.1</span> <span class="content">add</span></a>
        <li><a href="#api-neuralnetworkcontext-conv2d"><span class="secno">3.5.2</span> <span class="content">conv2d</span></a>
        <li><a href="#api-neuralnetworkcontext-matmul"><span class="secno">3.5.3</span> <span class="content">matmul</span></a>
        <li><a href="#api-neuralnetworkcontext-mul"><span class="secno">3.5.4</span> <span class="content">mul</span></a>
       </ol>
      <li><a href="#api-model"><span class="secno">3.6</span> <span class="content">Model</span></a>
      <li><a href="#api-compilation"><span class="secno">3.7</span> <span class="content">Compilation</span></a>
      <li><a href="#api-execution"><span class="secno">3.8</span> <span class="content">Execution</span></a>
     </ol>
    <li><a href="#examples"><span class="secno">4</span> <span class="content">Examples</span></a>
    <li><a href="#acknowledgements"><span class="secno">5</span> <span class="content">Acknowledgements</span></a>
    <li><a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p>Introduction here.</p>
   <h2 class="heading settled" data-level="2" id="usecases"><span class="secno">2. </span><span class="content">Use cases</span><a class="self-link" href="#usecases"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="usecases-application"><span class="secno">2.1. </span><span class="content">Application Use Cases</span><a class="self-link" href="#usecases-application"></a></h3>
   <p>This section illustrates application-level use cases for neural network
inference hardware acceleration. All applications in those use cases can be
built on top of pre-trained deep neural network (DNN) models.</p>
   <h4 class="heading settled" data-level="2.1.1" id="usecase-person-detection"><span class="secno">2.1.1. </span><span class="content">Person Detection</span><a class="self-link" href="#usecase-person-detection"></a></h4>
   <p>A user opens a web-based video conferencing application, but she temporarily
leaves from her room. The application is watching whether she is in front of her
PC by using object detection (for example, using object detection approaches
such as <a data-link-type="biblio" href="#biblio-ssd">[SSD]</a> or <a data-link-type="biblio" href="#biblio-yolo">[YOLO]</a> that use a single DNN) to detect regions in a camera
input frame that include persons.</p>
   <p>When she comes back, the application automatically detects her and notifies
other online users that she is active now.</p>
   <h4 class="heading settled" data-level="2.1.2" id="usecase-segmentation"><span class="secno">2.1.2. </span><span class="content">Semantic Segmentation</span><a class="self-link" href="#usecase-segmentation"></a></h4>
   <p>A user joins a teleconference via a web-based video conferencing application at
her desk since no meeting room in her office is available. During the
teleconference, she does not wish that her room and people in the background are
visible. To protect the privacy of the other people and the surroundings, the
application runs a machine learning model such as <a data-link-type="biblio" href="#biblio-deeplabv3">[DeepLabv3+]</a> or <a data-link-type="biblio" href="#biblio-maskr-cnn">[MaskR-CNN]</a> to semantically split an image into segments and replaces
segments that represent other people and background with another picture.</p>
   <h4 class="heading settled" data-level="2.1.3" id="usecase-skeleton-detection"><span class="secno">2.1.3. </span><span class="content">Skeleton Detection</span><a class="self-link" href="#usecase-skeleton-detection"></a></h4>
   <p>A web-based video conferencing application tracks a pose of user’s skeleton by
running a machine learning model, which allows for real-time human pose
estimation, such as <a data-link-type="biblio" href="#biblio-posenet">[PoseNet]</a> to recognize her gesture and body language. When
she raises her hand, her microphone is automatically unmuted and she can start
speaking on the teleconference.</p>
   <h4 class="heading settled" data-level="2.1.4" id="usecase-face-recognition"><span class="secno">2.1.4. </span><span class="content">Face Recognition</span><a class="self-link" href="#usecase-face-recognition"></a></h4>
   <p>There are multiple people in the conference room and they join an online meeting
using a web-based video conferencing application. The application detects faces
of participants by using object detection (for example, using object detection
approaches such as <a data-link-type="biblio" href="#biblio-ssd">[SSD]</a>) and checks whether each face was present at the
previous meeting or not by running a machine learning model such as <a data-link-type="biblio" href="#biblio-facenet">[FaceNet]</a>,
which verifies whether two faces would be identical or not.</p>
   <h4 class="heading settled" data-level="2.1.5" id="usecase-facial-landmarks"><span class="secno">2.1.5. </span><span class="content">Facial Landmark Detection</span><a class="self-link" href="#usecase-facial-landmarks"></a></h4>
   <p>A user wants to find new glasses that beautifully fits her on an online glasses
store. The online store offers web-based try-on simulator that runs a machine
learning model such as Face Alignment Network <a data-link-type="biblio" href="#biblio-fan">[FAN]</a> to detect facial landmarks
like eyes, nose, mouth, etc. When she chooses a pair of glasses, the simulator
properly render the selected glasses on the detected position of eyes on her
facial image.</p>
   <h4 class="heading settled" data-level="2.1.6" id="usecase-style-transfer"><span class="secno">2.1.6. </span><span class="content">Style Transfer</span><a class="self-link" href="#usecase-style-transfer"></a></h4>
   <p>A user is looking for cosmetics on an online store and wondering which color may
fit her face. The online store shows sample facial makeup images of cosmetics,
and offers makeup simulator that runs a machine learning model like <a data-link-type="biblio" href="#biblio-contextualloss">[ContextualLoss]</a> or <a data-link-type="biblio" href="#biblio-pairedcyclegan">[PairedCycleGAN]</a> to transfer the makeup style of the
sample makeup image to her facial image. She can check how the selected makeup
looks like on her face by the simulator.</p>
   <h4 class="heading settled" data-level="2.1.7" id="usecase-super-resolution"><span class="secno">2.1.7. </span><span class="content">Super Resolution</span><a class="self-link" href="#usecase-super-resolution"></a></h4>
   <p>A web-based video conferencing is receiving a video stream from its peer, but
the resolution of the video becomes lower due to network congestion. To prevent
degradation of the perceived video quality, the application runs a machine
learning model for super-resolution such as <a data-link-type="biblio" href="#biblio-srgan">[SRGAN]</a> to generate
higher-resolution video frames.</p>
   <h4 class="heading settled" data-level="2.1.8" id="usecase-image-captioning"><span class="secno">2.1.8. </span><span class="content">Image Captioning</span><a class="self-link" href="#usecase-image-captioning"></a></h4>
   <p>For better accessibility, a web-based presentation application provides
automatic image captioning by running a machine learning model such as <a data-link-type="biblio" href="#biblio-im2txt">[im2txt]</a> which predicts explanatory words of the presentation slides.</p>
   <h4 class="heading settled" data-level="2.1.9" id="usecase-translation"><span class="secno">2.1.9. </span><span class="content">Machine Translation</span><a class="self-link" href="#usecase-translation"></a></h4>
   <p>Multiple people from various countries are talking via a web-based real-time
text chat application. The application translates their conversation by using a
machine learning model such as <a data-link-type="biblio" href="#biblio-gnmt">[GNMT]</a> or <a data-link-type="biblio" href="#biblio-opennmt">[OpenNMT]</a>, which translates every
text into different language.</p>
   <h4 class="heading settled" data-level="2.1.10" id="usecase-emotion-analysis"><span class="secno">2.1.10. </span><span class="content">Emotion Analysis</span><a class="self-link" href="#usecase-emotion-analysis"></a></h4>
   <p>A user is talking to her friend via a web-based real-time text chat application,
and she is wondering how the friend feels because she cannot see the friend’s
face. The application analyses the friend’s emotion by using a machine learning
model such as <a data-link-type="biblio" href="#biblio-deepmoji">[DeepMoji]</a>, which infers emotion from input texts, and displays
an emoji that represents the estimated emotion.</p>
   <h4 class="heading settled" data-level="2.1.11" id="usecase-video-summalization"><span class="secno">2.1.11. </span><span class="content">Video Summarization</span><a class="self-link" href="#usecase-video-summalization"></a></h4>
   <p>A web-based video conferencing application records received video streams, and
it needs to reduce recorded video data to be stored. The application generates
the short version of the recorded video by using a machine learning model for
video summarization such as <a data-link-type="biblio" href="#biblio-video-summarization-with-lstm">[Video-Summarization-with-LSTM]</a>.</p>
   <h3 class="heading settled" data-level="2.2" id="usecases-framework"><span class="secno">2.2. </span><span class="content">Framework Use Cases</span><a class="self-link" href="#usecases-framework"></a></h3>
   <p>This section collects framework-level use cases for a dedicated low-level API
for neural network inference hardware acceleration. It is expected that Machine
Learning frameworks will be key consumers of the Web Neural Network API (WebNN
API) and the low-level details exposed through the WebNN API are abstracted out
from typical web developers. However, it is also expected that web developers
with specific interest and competence in Machine Learning will want to interface
with the WebNN API directly instead of a higher-level ML framework.</p>
   <h4 class="heading settled" data-level="2.2.1" id="usecase-custom-layer"><span class="secno">2.2.1. </span><span class="content">Custom Layer</span><a class="self-link" href="#usecase-custom-layer"></a></h4>
   <p>A web application developer wants to run a DNN model on the WebNN API. However,
she has found that some of activation functions like <a data-link-type="biblio" href="#biblio-leakyrelu">[LeakyReLU]</a>, <a data-link-type="biblio" href="#biblio-elu">[ELU]</a>,
etc. are not included in the WebNN API. To address this issue, she constructs
custom layers of the additional activation functions on top of the WebNN API.
Note that the scope of custom layers may include convolution, normalization,
etc. as well as activation.</p>
   <h4 class="heading settled" data-level="2.2.2" id="usecase-network-concat"><span class="secno">2.2.2. </span><span class="content">Network Concatenation</span><a class="self-link" href="#usecase-network-concat"></a></h4>
   <p>A web application uses a DNN model, and its model data of upper convolutional
layers and lower fully-connected layers are stored in separate files, since
model data of the fully-connected layers are periodically updated due to fine
tuning at the server side.</p>
   <p>Therefore, the application downloads both partial model files at first and
concatenates them into a single model. When the model is updated, the
application downloads fine-tuned part of the model and replace only the
fully-connected layers with it.</p>
   <h4 class="heading settled" data-level="2.2.3" id="usecase-perf-adapt"><span class="secno">2.2.3. </span><span class="content">Performance Adaptation</span><a class="self-link" href="#usecase-perf-adapt"></a></h4>
   <p>A web application developer has a concern about performance of her DNN model on
mobile devices. She has confirmed that it may run too slow on mobile devices
which do not have GPU acceleration. To address this issue, her web application
refers to the WebNN API to confirm whether acceleration is available or not, so
that the application can display the warning for devices without acceleration.</p>
   <p>After several weeks, she has developed a tiny DNN model that can even run on
CPU. In order to accommodate CPU execution, she modifies the application
so that the application loads the tiny model in the case of CPU-only devices.</p>
   <h2 class="heading settled" data-level="3" id="api"><span class="secno">3. </span><span class="content">API</span><a class="self-link" href="#api"></a></h2>
   <h3 class="heading settled" data-level="3.1" id="api-navigator"><span class="secno">3.1. </span><span class="content">Navigator</span><a class="self-link" href="#api-navigator"></a></h3>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator" id="ref-for-navigator"><c- g>Navigator</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="#ml" id="ref-for-ml"><c- n>ML</c-></a> <dfn class="idl-code" data-dfn-for="Navigator" data-dfn-type="attribute" data-export data-readonly data-type="ML" id="dom-navigator-ml"><code><c- g>ml</c-></code><a class="self-link" href="#dom-navigator-ml"></a></dfn>;
};
</pre>
   <h3 class="heading settled" data-level="3.2" id="api-ml"><span class="secno">3.2. </span><span class="content">ML</span><a class="self-link" href="#api-ml"></a></h3>
<pre class="idl highlight def"><c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="ml"><code><c- g>ML</c-></code></dfn> {
  <a class="n" data-link-type="idl-name" href="#neuralnetworkcontext" id="ref-for-neuralnetworkcontext"><c- n>NeuralNetworkContext</c-></a> <dfn class="idl-code" data-dfn-for="ML" data-dfn-type="method" data-export data-lt="getNeuralNetworkContext()" id="dom-ml-getneuralnetworkcontext"><code><c- g>getNeuralNetworkContext</c-></code><a class="self-link" href="#dom-ml-getneuralnetworkcontext"></a></dfn>();
};
</pre>
   <h3 class="heading settled" data-level="3.3" id="api-operanddescriptor"><span class="secno">3.3. </span><span class="content">OperandDescriptor</span><a class="self-link" href="#api-operanddescriptor"></a></h3>
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-operandlayout"><code><c- g>OperandLayout</c-></code></dfn> {
  <dfn class="idl-code" data-dfn-for="OperandLayout" data-dfn-type="enum-value" data-export id="dom-operandlayout-nchw"><code><c- s>"nchw"</c-></code><a class="self-link" href="#dom-operandlayout-nchw"></a></dfn>,
  <dfn class="idl-code" data-dfn-for="OperandLayout" data-dfn-type="enum-value" data-export id="dom-operandlayout-nhwc"><code><c- s>"nhwc"</c-></code><a class="self-link" href="#dom-operandlayout-nhwc"></a></dfn>
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-operandtype"><code><c- g>OperandType</c-></code></dfn> {
  <dfn class="idl-code" data-dfn-for="OperandType" data-dfn-type="enum-value" data-export id="dom-operandtype-float32"><code><c- s>"float32"</c-></code><a class="self-link" href="#dom-operandtype-float32"></a></dfn>,
  <dfn class="idl-code" data-dfn-for="OperandType" data-dfn-type="enum-value" data-export id="dom-operandtype-float16"><code><c- s>"float16"</c-></code><a class="self-link" href="#dom-operandtype-float16"></a></dfn>,
  <dfn class="idl-code" data-dfn-for="OperandType" data-dfn-type="enum-value" data-export id="dom-operandtype-int32"><code><c- s>"int32"</c-></code><a class="self-link" href="#dom-operandtype-int32"></a></dfn>,
  <dfn class="idl-code" data-dfn-for="OperandType" data-dfn-type="enum-value" data-export id="dom-operandtype-uint32"><code><c- s>"uint32"</c-></code><a class="self-link" href="#dom-operandtype-uint32"></a></dfn>,
  <dfn class="idl-code" data-dfn-for="OperandType" data-dfn-type="enum-value" data-export id="dom-operandtype-tensor-float32"><code><c- s>"tensor-float32"</c-></code><a class="self-link" href="#dom-operandtype-tensor-float32"></a></dfn>,
  <dfn class="idl-code" data-dfn-for="OperandType" data-dfn-type="enum-value" data-export id="dom-operandtype-tensor-float16"><code><c- s>"tensor-float16"</c-></code><a class="self-link" href="#dom-operandtype-tensor-float16"></a></dfn>,
  <dfn class="idl-code" data-dfn-for="OperandType" data-dfn-type="enum-value" data-export id="dom-operandtype-tensor-int32"><code><c- s>"tensor-int32"</c-></code><a class="self-link" href="#dom-operandtype-tensor-int32"></a></dfn>,
  <dfn class="idl-code" data-dfn-for="OperandType" data-dfn-type="enum-value" data-export id="dom-operandtype-tensor-quant8-asymm"><code><c- s>"tensor-quant8-asymm"</c-></code><a class="self-link" href="#dom-operandtype-tensor-quant8-asymm"></a></dfn>
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-operanddescriptor"><code><c- g>OperandDescriptor</c-></code></dfn> {
  // The operand type.
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#enumdef-operandtype" id="ref-for-enumdef-operandtype"><c- n>OperandType</c-></a> <dfn class="idl-code" data-dfn-for="OperandDescriptor" data-dfn-type="dict-member" data-export data-type="OperandType " id="dom-operanddescriptor-type"><code><c- g>type</c-></code><a class="self-link" href="#dom-operanddescriptor-type"></a></dfn>;

  // The dimensions field is only required for tensor operands.
  // The negative value means an unknown dimension.
  <c- b>sequence</c->&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-long" id="ref-for-idl-long"><c- b>long</c-></a>> <dfn class="idl-code" data-dfn-for="OperandDescriptor" data-dfn-type="dict-member" data-export data-type="sequence<long> " id="dom-operanddescriptor-dimensions"><code><c- g>dimensions</c-></code><a class="self-link" href="#dom-operanddescriptor-dimensions"></a></dfn>;

  // The following two fields are only required for quantized operand.
  // scale: an non-negative floating point value
  // zeroPoint: an integer, in range [0, 255]
  // The real value is (value - zeroPoint) * scale
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float"><c- b>float</c-></a> <dfn class="idl-code" data-dfn-for="OperandDescriptor" data-dfn-type="dict-member" data-export data-type="float " id="dom-operanddescriptor-scale"><code><c- g>scale</c-></code><a class="self-link" href="#dom-operanddescriptor-scale"></a></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-long" id="ref-for-idl-long①"><c- b>long</c-></a> <dfn class="idl-code" data-dfn-for="OperandDescriptor" data-dfn-type="dict-member" data-export data-type="long " id="dom-operanddescriptor-zeropoint"><code><c- g>zeroPoint</c-></code><a class="self-link" href="#dom-operanddescriptor-zeropoint"></a></dfn>;
};
</pre>
   <h3 class="heading settled" data-level="3.4" id="api-operand"><span class="secno">3.4. </span><span class="content">Operand</span><a class="self-link" href="#api-operand"></a></h3>
<pre class="idl highlight def"><c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="operand"><code><c- g>Operand</c-></code></dfn> {};
</pre>
   <h3 class="heading settled" data-level="3.5" id="api-neuralnetworkcontext"><span class="secno">3.5. </span><span class="content">NeuralNetworkContext</span><a class="self-link" href="#api-neuralnetworkcontext"></a></h3>
<pre class="idl highlight def"><c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="neuralnetworkcontext"><code><c- g>NeuralNetworkContext</c-></code></dfn> {
  // Create an Operand object that represents a model input.
  <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand"><c- n>Operand</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext" data-dfn-type="method" data-export data-lt="input(desc)" id="dom-neuralnetworkcontext-input"><code><c- g>input</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-input"></a></dfn>(<a class="n" data-link-type="idl-name" href="#dictdef-operanddescriptor" id="ref-for-dictdef-operanddescriptor"><c- n>OperandDescriptor</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/input(desc)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-input-desc-desc"><code><c- g>desc</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-input-desc-desc"></a></dfn>);

  // Create an Operand object that represents a model constant.
  <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand①"><c- n>Operand</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext" data-dfn-type="method" data-export data-lt="constant(desc, value)" id="dom-neuralnetworkcontext-constant"><code><c- g>constant</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-constant"></a></dfn>(<a class="n" data-link-type="idl-name" href="#dictdef-operanddescriptor" id="ref-for-dictdef-operanddescriptor①"><c- n>OperandDescriptor</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/constant(desc, value)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-constant-desc-value-desc"><code><c- g>desc</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-constant-desc-value-desc"></a></dfn>, <a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#ArrayBufferView" id="ref-for-ArrayBufferView"><c- n>ArrayBufferView</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/constant(desc, value)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-constant-desc-value-value"><code><c- g>value</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-constant-desc-value-value"></a></dfn>);

  // Create a Model object by identifying output operands.
  <c- b>Promise</c->&lt;<a class="n" data-link-type="idl-name" href="#model" id="ref-for-model"><c- n>Model</c-></a>> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext" data-dfn-type="method" data-export data-lt="createModel(outputs)" id="dom-neuralnetworkcontext-createmodel"><code><c- g>createModel</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-createmodel"></a></dfn>(<c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand②"><c- n>Operand</c-></a>> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/createModel(outputs)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-createmodel-outputs-outputs"><code><c- g>outputs</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-createmodel-outputs-outputs"></a></dfn>);
};
</pre>
   <h4 class="heading settled" data-level="3.5.1" id="api-neuralnetworkcontext-add"><span class="secno">3.5.1. </span><span class="content">add</span><a class="self-link" href="#api-neuralnetworkcontext-add"></a></h4>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#neuralnetworkcontext" id="ref-for-neuralnetworkcontext①"><c- g>NeuralNetworkContext</c-></a> {
  // Create an Operand object that represents the result of an element-wise
  // binary addition operation with input operands a and b.
  <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand③"><c- n>Operand</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext" data-dfn-type="method" data-export data-lt="add(a, b)" id="dom-neuralnetworkcontext-add"><code><c- g>add</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-add"></a></dfn>(<a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand④"><c- n>Operand</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/add(a, b)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-add-a-b-a"><code><c- g>a</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-add-a-b-a"></a></dfn>, <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand⑤"><c- n>Operand</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/add(a, b)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-add-a-b-b"><code><c- g>b</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-add-a-b-b"></a></dfn>);
};
</pre>
   <h4 class="heading settled" data-level="3.5.2" id="api-neuralnetworkcontext-conv2d"><span class="secno">3.5.2. </span><span class="content">conv2d</span><a class="self-link" href="#api-neuralnetworkcontext-conv2d"></a></h4>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#neuralnetworkcontext" id="ref-for-neuralnetworkcontext②"><c- g>NeuralNetworkContext</c-></a> {
  <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand⑥"><c- n>Operand</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext" data-dfn-type="method" data-export data-lt="conv2d(input, filter, padding, strides, dilations, layout)|conv2d(input, filter, padding, strides, dilations)" id="dom-neuralnetworkcontext-conv2d"><code><c- g>conv2d</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-conv2d"></a></dfn>(<a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand⑦"><c- n>Operand</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/conv2d(input, filter, padding, strides, dilations, layout), NeuralNetworkContext/conv2d(input, filter, padding, strides, dilations)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-input"><code><c- g>input</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-input"></a></dfn>, <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand⑧"><c- n>Operand</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/conv2d(input, filter, padding, strides, dilations, layout), NeuralNetworkContext/conv2d(input, filter, padding, strides, dilations)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-filter"><code><c- g>filter</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-filter"></a></dfn>,
                 <c- b>sequence</c->&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-long" id="ref-for-idl-long②"><c- b>long</c-></a>> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/conv2d(input, filter, padding, strides, dilations, layout), NeuralNetworkContext/conv2d(input, filter, padding, strides, dilations)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-padding"><code><c- g>padding</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-padding"></a></dfn>, <c- b>sequence</c->&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-long" id="ref-for-idl-long③"><c- b>long</c-></a>> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/conv2d(input, filter, padding, strides, dilations, layout), NeuralNetworkContext/conv2d(input, filter, padding, strides, dilations)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-strides"><code><c- g>strides</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-strides"></a></dfn>, <c- b>sequence</c->&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-long" id="ref-for-idl-long④"><c- b>long</c-></a>> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/conv2d(input, filter, padding, strides, dilations, layout), NeuralNetworkContext/conv2d(input, filter, padding, strides, dilations)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-dilations"><code><c- g>dilations</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-dilations"></a></dfn>,
                 <c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#enumdef-operandlayout" id="ref-for-enumdef-operandlayout"><c- n>OperandLayout</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/conv2d(input, filter, padding, strides, dilations, layout), NeuralNetworkContext/conv2d(input, filter, padding, strides, dilations)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-layout"><code><c- g>layout</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-layout"></a></dfn> = "nchw");
};
</pre>
   <div class="algorithm" data-algorithm="conv2d">
     <strong>Arguments:</strong> 
    <ul>
     <li data-md>
      <p><em>input</em>: an <code class="idl"><a data-link-type="idl" href="#operand" id="ref-for-operand⑨">Operand</a></code>. The input 4-D tensor. The logical shape
is interpreted according to the value of <em>layout</em>.</p>
     <li data-md>
      <p><em>filter</em>: an <code class="idl"><a data-link-type="idl" href="#operand" id="ref-for-operand①⓪">Operand</a></code>. The filter 4-D tensor. The logical shape
is interpreted according to the value of <em>layout</em>.</p>
     <li data-md>
      <p><em>padding</em>: a sequence of <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-long" id="ref-for-idl-long⑤">long</a></code> of length 4. The padding for the
beginning and ending along each spatial dimension of <em>input</em>,
[beginning_height, ending_height, beginning_width, ending_width].</p>
     <li data-md>
      <p><em>strides</em>: a sequence of <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-long" id="ref-for-idl-long⑥">long</a></code> of length 2. The stride of the
sliding window for each spatial dimension of <em>input</em>,
[stride_height, stirde_width].</p>
     <li data-md>
      <p><em>dilations</em>: a sequence of <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-long" id="ref-for-idl-long⑦">long</a></code> of length 2. The dilation factor
for each spatial dimension of <em>input</em>, [dilation_height,
dilation_width].</p>
     <li data-md>
      <p><em>layout</em>: an optional <code class="idl"><a data-link-type="idl" href="#enumdef-operandlayout" id="ref-for-enumdef-operandlayout①">OperandLayout</a></code> with value as "nchw" or
"nhwc". The default value is "nchw". This argument specifies the
layout format of the input, output and filter tensor.
Specifically,</p>
      <p>"nchw":</p>
      <ul>
       <li data-md>
        <p>input tensor: [batches, input_channels, height, width]</p>
       <li data-md>
        <p>filter tensor: [output_channels, input_channels, height,
width]</p>
       <li data-md>
        <p>output tensor: [batches, output_channels, height, width]</p>
      </ul>
      "nhwc": 
      <ul>
       <li data-md>
        <p>input tensor: [batches, height, width, input_channels]</p>
       <li data-md>
        <p>filter tensor: [height, width, input_channels,
output_channels]</p>
       <li data-md>
        <p>output tensor: [batches, height, width, output_channels]</p>
      </ul>
    </ul>
    <p><strong>Returns:</strong> an <code class="idl"><a data-link-type="idl" href="#operand" id="ref-for-operand①①">Operand</a></code>. The output 4-D tensor that contains the
    result of the convolution. The logical shape is interpreted according to the
    value of <em>layout</em>.</p>
    <p>Computes a 2-D convolution given input and filter 4-D tensors.</p>
   </div>
   <h4 class="heading settled" data-level="3.5.3" id="api-neuralnetworkcontext-matmul"><span class="secno">3.5.3. </span><span class="content">matmul</span><a class="self-link" href="#api-neuralnetworkcontext-matmul"></a></h4>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#neuralnetworkcontext" id="ref-for-neuralnetworkcontext③"><c- g>NeuralNetworkContext</c-></a> {
  <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand①②"><c- n>Operand</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext" data-dfn-type="method" data-export data-lt="matmul(a, b)" id="dom-neuralnetworkcontext-matmul"><code><c- g>matmul</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-matmul"></a></dfn>(<a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand①③"><c- n>Operand</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/matmul(a, b)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-matmul-a-b-a"><code><c- g>a</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-matmul-a-b-a"></a></dfn>, <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand①④"><c- n>Operand</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/matmul(a, b)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-matmul-a-b-b"><code><c- g>b</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-matmul-a-b-b"></a></dfn>);
};
</pre>
   <div class="algorithm" data-algorithm="matmul">
     <strong>Arguments:</strong> 
    <ul>
     <li data-md>
      <p><em>a</em>: an <code class="idl"><a data-link-type="idl" href="#operand" id="ref-for-operand①⑤">Operand</a></code>. The first input N-D tensor.</p>
     <li data-md>
      <p><em>b</em>: an <code class="idl"><a data-link-type="idl" href="#operand" id="ref-for-operand①⑥">Operand</a></code>. The second input N-D tensor.</p>
    </ul>
    <p><strong>Returns:</strong> an <code class="idl"><a data-link-type="idl" href="#operand" id="ref-for-operand①⑦">Operand</a></code>. The output N-D tensor that contains the matrix
    product of two input tensors.</p>
    <p>Computes the matrix product of two input tensors. It behaves as following:</p>
    <ul>
     <li data-md>
      <p>If both <em>a</em> and <em>b</em> are 2-D, they are multiplied like conventional
matrices and produce a 2-D tensor as the output.</p>
     <li data-md>
      <p>If either <em>a</em> or <em>b</em> is N-D, N > 2, it is treated as a stack of
matrices with dimensions corresponding to the last two indices. The
matrix multiplication will be broadcasted accordingly by following <a data-link-type="biblio" href="#biblio-numpy-broadcasting-rule">[numpy-broadcasting-rule]</a>. The output is a N-D tensor whose rank
is the maximum rank of the input tensors. For each dimension, except
the last two, of the output tensor, its size is the maximum size
along that dimension of the input tensors.</p>
     <li data-md>
      <p>If <em>a</em> is 1-D, it is converted to a 2-D tensor by prepending a 1 to
its dimensions.</p>
     <li data-md>
      <p>If <em>b</em> is 1-D, it is converted to a 2-D tensor by by appending a 1 to
its dimensions.</p>
     <li data-md>
      <p>If both <em>a</em> and <em>b</em> are 1-D, the operation is a vector dot-product,
which produces a scalar output.</p>
    </ul>
   </div>
   <h4 class="heading settled" data-level="3.5.4" id="api-neuralnetworkcontext-mul"><span class="secno">3.5.4. </span><span class="content">mul</span><a class="self-link" href="#api-neuralnetworkcontext-mul"></a></h4>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#neuralnetworkcontext" id="ref-for-neuralnetworkcontext④"><c- g>NeuralNetworkContext</c-></a> {
  // Create an Operand object that represents the result of an element-wise
  // binary multiplication operation with input operands a and b.
  <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand①⑧"><c- n>Operand</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext" data-dfn-type="method" data-export data-lt="mul(a, b)" id="dom-neuralnetworkcontext-mul"><code><c- g>mul</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-mul"></a></dfn>(<a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand①⑨"><c- n>Operand</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/mul(a, b)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-mul-a-b-a"><code><c- g>a</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-mul-a-b-a"></a></dfn>, <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand②⓪"><c- n>Operand</c-></a> <dfn class="idl-code" data-dfn-for="NeuralNetworkContext/mul(a, b)" data-dfn-type="argument" data-export id="dom-neuralnetworkcontext-mul-a-b-b"><code><c- g>b</c-></code><a class="self-link" href="#dom-neuralnetworkcontext-mul-a-b-b"></a></dfn>);
};
</pre>
   <h3 class="heading settled" data-level="3.6" id="api-model"><span class="secno">3.6. </span><span class="content">Model</span><a class="self-link" href="#api-model"></a></h3>
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-powerpreference"><code><c- g>PowerPreference</c-></code></dfn> {
  // Prioritizes execution speed over other considerations e.g. power consumption
  <dfn class="idl-code" data-dfn-for="PowerPreference" data-dfn-type="enum-value" data-export id="dom-powerpreference-high-performance"><code><c- s>"high-performance"</c-></code><a class="self-link" href="#dom-powerpreference-high-performance"></a></dfn>,
  // Prioritizes power consumption over other consideraions e.g. execution speed
  <dfn class="idl-code" data-dfn-for="PowerPreference" data-dfn-type="enum-value" data-export id="dom-powerpreference-low-power"><code><c- s>"low-power"</c-></code><a class="self-link" href="#dom-powerpreference-low-power"></a></dfn>
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-compilationoptions"><code><c- g>CompilationOptions</c-></code></dfn> {
  // Compilation preference as related to power consumption level
  <a class="n" data-link-type="idl-name" href="#enumdef-powerpreference" id="ref-for-enumdef-powerpreference"><c- n>PowerPreference</c-></a> <dfn class="idl-code" data-dfn-for="CompilationOptions" data-dfn-type="dict-member" data-export data-type="PowerPreference " id="dom-compilationoptions-powerpreference"><code><c- g>powerPreference</c-></code><a class="self-link" href="#dom-compilationoptions-powerpreference"></a></dfn>;
};

<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="model"><code><c- g>Model</c-></code></dfn> {
  <c- b>Promise</c->&lt;<a class="n" data-link-type="idl-name" href="#compilation" id="ref-for-compilation"><c- n>Compilation</c-></a>> <dfn class="idl-code" data-dfn-for="Model" data-dfn-type="method" data-export data-lt="createCompilation(options)|createCompilation()" id="dom-model-createcompilation"><code><c- g>createCompilation</c-></code><a class="self-link" href="#dom-model-createcompilation"></a></dfn>(<c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-compilationoptions" id="ref-for-dictdef-compilationoptions"><c- n>CompilationOptions</c-></a> <dfn class="idl-code" data-dfn-for="Model/createCompilation(options), Model/createCompilation()" data-dfn-type="argument" data-export id="dom-model-createcompilation-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-model-createcompilation-options-options"></a></dfn> = {});
};
</pre>
   <h3 class="heading settled" data-level="3.7" id="api-compilation"><span class="secno">3.7. </span><span class="content">Compilation</span><a class="self-link" href="#api-compilation"></a></h3>
<pre class="idl highlight def"><c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="compilation"><code><c- g>Compilation</c-></code></dfn> {
  <c- b>Promise</c->&lt;<a class="n" data-link-type="idl-name" href="#execution" id="ref-for-execution"><c- n>Execution</c-></a>> <dfn class="idl-code" data-dfn-for="Compilation" data-dfn-type="method" data-export data-lt="createExecution()" id="dom-compilation-createexecution"><code><c- g>createExecution</c-></code><a class="self-link" href="#dom-compilation-createexecution"></a></dfn>();
};
</pre>
   <h3 class="heading settled" data-level="3.8" id="api-execution"><span class="secno">3.8. </span><span class="content">Execution</span><a class="self-link" href="#api-execution"></a></h3>
<pre class="idl highlight def"><c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="execution"><code><c- g>Execution</c-></code></dfn> {
  <c- b>void</c-> <dfn class="idl-code" data-dfn-for="Execution" data-dfn-type="method" data-export data-lt="setInput(index, data)" id="dom-execution-setinput"><code><c- g>setInput</c-></code><a class="self-link" href="#dom-execution-setinput"></a></dfn>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long" id="ref-for-idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="idl-code" data-dfn-for="Execution/setInput(index, data)" data-dfn-type="argument" data-export id="dom-execution-setinput-index-data-index"><code><c- g>index</c-></code><a class="self-link" href="#dom-execution-setinput-index-data-index"></a></dfn>, <a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#ArrayBufferView" id="ref-for-ArrayBufferView①"><c- n>ArrayBufferView</c-></a> <dfn class="idl-code" data-dfn-for="Execution/setInput(index, data)" data-dfn-type="argument" data-export id="dom-execution-setinput-index-data-data"><code><c- g>data</c-></code><a class="self-link" href="#dom-execution-setinput-index-data-data"></a></dfn>);
  <c- b>void</c-> <dfn class="idl-code" data-dfn-for="Execution" data-dfn-type="method" data-export data-lt="setOutput(index, data)" id="dom-execution-setoutput"><code><c- g>setOutput</c-></code><a class="self-link" href="#dom-execution-setoutput"></a></dfn>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long" id="ref-for-idl-unsigned-long①"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="idl-code" data-dfn-for="Execution/setOutput(index, data)" data-dfn-type="argument" data-export id="dom-execution-setoutput-index-data-index"><code><c- g>index</c-></code><a class="self-link" href="#dom-execution-setoutput-index-data-index"></a></dfn>, <a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#ArrayBufferView" id="ref-for-ArrayBufferView②"><c- n>ArrayBufferView</c-></a> <dfn class="idl-code" data-dfn-for="Execution/setOutput(index, data)" data-dfn-type="argument" data-export id="dom-execution-setoutput-index-data-data"><code><c- g>data</c-></code><a class="self-link" href="#dom-execution-setoutput-index-data-data"></a></dfn>);
  <c- b>Promise</c->&lt;<c- b>void</c->> <dfn class="idl-code" data-dfn-for="Execution" data-dfn-type="method" data-export data-lt="startCompute()" id="dom-execution-startcompute"><code><c- g>startCompute</c-></code><a class="self-link" href="#dom-execution-startcompute"></a></dfn>();
};
</pre>
   <h2 class="heading settled" data-level="4" id="examples"><span class="secno">4. </span><span class="content">Examples</span><a class="self-link" href="#examples"></a></h2>
   <div class="example" id="example-36ed72d9">
    <a class="self-link" href="#example-36ed72d9"></a> The following code gets the NeuralNetworkContext object. 
<pre class="highlight"><c- kr>const</c-> nn <c- o>=</c-> navigator<c- p>.</c->ml<c- p>.</c->getNeuralNetworkContext<c- p>();</c->
</pre>
   </div>
   <div class="example" id="example-b88ca87a">
    <a class="self-link" href="#example-b88ca87a"></a> The following code builds a graph as: 
<pre>tensor0 ---+
           +--- Add ---> intermediateOutput0 ---+
tensor1 ---+                                    |
                                                +--- Mul---> output
tensor2 ---+                                    |
           +--- Add ---> intermediateOutput1 ---+
tensor3 ---+
</pre>
    <p>The tensor0 and tensor2 are constants. The tensor1 and tensor3 are user inputs.</p>
<pre class="highlight"><c- c1>// Use tensors in 4 dimensions.</c->
<c- kr>const</c-> TENSOR_DIMS <c- o>=</c-> <c- p>[</c-><c- mi>2</c-><c- p>,</c-> <c- mi>2</c-><c- p>,</c-> <c- mi>2</c-><c- p>,</c-> <c- mi>2</c-><c- p>];</c->
<c- kr>const</c-> TENSOR_SIZE <c- o>=</c-> <c- mi>16</c-><c- p>;</c->

<c- c1>// Create OperandDescriptor object.</c->
<c- kr>const</c-> float32TensorType <c- o>=</c-> <c- p>{</c->type<c- o>:</c-> <c- t>'tensor-float32'</c-><c- p>,</c-> dimensions<c- o>:</c-> TENSOR_DIMS<c- p>};</c->

<c- c1>// tensor0 is a constant tensor. Set its value from an ArrayBuffer object.</c->
<c- c1>// The ArrayBuffer object may contain the training data loaded before hand.</c->
<c- kr>const</c-> tensor0 <c- o>=</c-> nn<c- p>.</c->constant<c- p>(</c->float32TensorType<c- p>,</c->
                            <c- k>new</c-> Float32Array<c- p>(</c->arrayBuffer<c- p>,</c-> <c- mi>0</c-><c- p>,</c-> TENSOR_SIZE<c- p>));</c->

<c- c1>// tensor1 is one of the input tensors. Its value will be set before execution.</c->
<c- kr>const</c-> tensor1 <c- o>=</c-> nn<c- p>.</c->input<c- p>(</c->float32TensorType<c- p>);</c->

<c- c1>// tensor2 is another constant tensor. Set its value from same ArrayBuffer</c->
<c- c1>// object with offset.</c->
<c- kr>const</c-> tensor2 <c- o>=</c-> nn<c- p>.</c->constant<c- p>(</c->float32TensorType<c- p>,</c->
                            <c- k>new</c-> Float32Array<c- p>(</c->arrayBuffer<c- p>,</c->
                                             TENSOR_SIZE <c- o>*</c-> Float32Array<c- p>.</c->BYTES_PER_ELEMENT<c- p>,</c->
                                             TENSOR_SIZE<c- p>));</c->

<c- c1>// tensor3 is another input tensor. Its value will be set before execution.</c->
<c- kr>const</c-> tensor3 <c- o>=</c-> nn<c- p>.</c->input<c- p>(</c->float32TensorType<c- p>);</c->

<c- c1>// intermediateOutput0 is the output of the first Add operation.</c->
<c- kr>const</c-> intermediateOutput0 <c- o>=</c-> nn<c- p>.</c->add<c- p>(</c->tensor0<c- p>,</c-> tensor1<c- p>);</c->

<c- c1>// intermediateOutput1 is the output of the second Add operation.</c->
<c- kr>const</c-> intermediateOutput1 <c- o>=</c-> nn<c- p>.</c->add<c- p>(</c->tensor2<c- p>,</c-> tensor3<c- p>);</c->

<c- c1>// output is the output tensor of the Mul operation.</c->
<c- kr>const</c-> output <c- o>=</c-> nn<c- p>.</c->mul<c- p>(</c->intermediateOutput0<c- p>,</c-> intermediateOutput1<c- p>);</c->

<c- c1>// Create the model by identifying the outputs.</c->
<c- kr>const</c-> model <c- o>=</c-> await nn<c- p>.</c->createModel<c- p>([</c->output<c- p>]);</c->
</pre>
   </div>
   <div class="example" id="example-02335b34">
    <a class="self-link" href="#example-02335b34"></a> The following code compiles the model by prioritizing lower level of power consumption
over time. This option could be particularly useful for long-running models. 
<pre class="highlight"><c- c1>// Create a Compilation object for the constructed model.</c->
<c- kr>const</c-> options <c- o>=</c-> <c- p>{</c-> powerPreference<c- o>:</c-> <c- t>'low-power'</c-> <c- p>};</c->
<c- kr>const</c-> compilation <c- o>=</c-> await model<c- p>.</c->createCompilation<c- p>(</c->options<c- p>);</c->
</pre>
   </div>
   <div class="example" id="example-480ca5f6">
    <a class="self-link" href="#example-480ca5f6"></a> The following code executes the compiled graph. 
<pre class="highlight"><c- c1>// Create an Execution object for the compiled model.</c->
<c- kr>const</c-> execution <c- o>=</c-> await compilation<c- p>.</c->createExecution<c- p>();</c->

<c- c1>// Setup the input tensors that contain the input data provided by the user.</c->
<c- kr>const</c-> inputTensor1 <c- o>=</c-> <c- k>new</c-> Float32Array<c- p>(</c->TENSOR_SIZE<c- p>);</c->
inputTensor1<c- p>.</c->fill<c- p>(</c->inputValue1<c- p>);</c->
<c- kr>const</c-> inputTensor2 <c- o>=</c-> <c- k>new</c-> Float32Array<c- p>(</c->TENSOR_SIZE<c- p>);</c->
inputTensor2<c- p>.</c->fill<c- p>(</c->inputValue2<c- p>);</c->

<c- c1>// Associate the input tensors to model’s inputs.</c->
execution<c- p>.</c->setInput<c- p>(</c-><c- mi>0</c-><c- p>,</c-> inputTensor1<c- p>);</c->
execution<c- p>.</c->setInput<c- p>(</c-><c- mi>1</c-><c- p>,</c-> inputTensor2<c- p>);</c->

<c- c1>// Associate the output tensor to model’s output.</c->
<c- a>let</c-> outputTensor <c- o>=</c-> <c- k>new</c-> Float32Array<c- p>(</c->TENSOR_SIZE<c- p>);</c->
execution<c- p>.</c->setOutput<c- p>(</c-><c- mi>0</c-><c- p>,</c-> outputTensor<c- p>);</c->

<c- c1>// Start the asynchronous computation.</c->
await execution<c- p>.</c->startCompute<c- p>();</c->
<c- c1>// The computed result is now in outputTensor.</c->
</pre>
   </div>
   <h2 class="heading settled" data-level="5" id="acknowledgements"><span class="secno">5. </span><span class="content">Acknowledgements</span><a class="self-link" href="#acknowledgements"></a></h2>
   <p>This specification follows the concepts of the Android Neural Networks API C
API.</p>
   <p>Thanks to Tomoyuki Shimizu, Ningxin Hu, and Zhiqiang Yu for the use cases.</p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p> Conformance requirements are expressed with a combination of descriptive assertions and RFC 2119 terminology.
            The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
            in the normative parts of this document
            are to be interpreted as described in RFC 2119.
            However, for readability,
            these words do not appear in all uppercase letters in this specification. </p>
   <p> All of the text of this specification is normative
            except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p> Examples in this specification are introduced with the words “for example”
            or are set apart from the normative text with <code>class="example"</code>, like this: </p>
   <div class="example" id="example-example"><a class="self-link" href="#example-example"></a> This is an example of an informative example. </div>
   <p> Informative notes begin with the word “Note”
            and are set apart from the normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note"> Note, this is an informative note. </p>
  </div>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don’t scroll to compensate for the ToC if we’re above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don’t know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn’t exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn’t standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don’t have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we’re at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can’t find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-neuralnetworkcontext-add">add(a, b)</a><span>, in §3.5.1</span>
   <li><a href="#compilation">Compilation</a><span>, in §3.7</span>
   <li><a href="#dictdef-compilationoptions">CompilationOptions</a><span>, in §3.6</span>
   <li><a href="#dom-neuralnetworkcontext-constant">constant(desc, value)</a><span>, in §3.5</span>
   <li><a href="#dom-neuralnetworkcontext-conv2d">conv2d(input, filter, padding, strides, dilations)</a><span>, in §3.5.2</span>
   <li><a href="#dom-neuralnetworkcontext-conv2d">conv2d(input, filter, padding, strides, dilations, layout)</a><span>, in §3.5.2</span>
   <li><a href="#dom-model-createcompilation">createCompilation()</a><span>, in §3.6</span>
   <li><a href="#dom-model-createcompilation">createCompilation(options)</a><span>, in §3.6</span>
   <li><a href="#dom-compilation-createexecution">createExecution()</a><span>, in §3.7</span>
   <li><a href="#dom-neuralnetworkcontext-createmodel">createModel(outputs)</a><span>, in §3.5</span>
   <li><a href="#dom-operanddescriptor-dimensions">dimensions</a><span>, in §3.3</span>
   <li><a href="#execution">Execution</a><span>, in §3.8</span>
   <li><a href="#dom-operandtype-float16">"float16"</a><span>, in §3.3</span>
   <li><a href="#dom-operandtype-float32">"float32"</a><span>, in §3.3</span>
   <li><a href="#dom-ml-getneuralnetworkcontext">getNeuralNetworkContext()</a><span>, in §3.2</span>
   <li><a href="#dom-powerpreference-high-performance">"high-performance"</a><span>, in §3.6</span>
   <li><a href="#dom-neuralnetworkcontext-input">input(desc)</a><span>, in §3.5</span>
   <li><a href="#dom-operandtype-int32">"int32"</a><span>, in §3.3</span>
<<<<<<< HEAD
   <li><a href="#dom-compilationpreference-low-power">"low-power"</a><span>, in §3.6</span>
   <li><a href="#dom-neuralnetworkcontext-matmul">matmul(a, b)</a><span>, in §3.5.3</span>
   <li><a href="#dom-navigator-ml">ml</a><span>, in §3.1</span>
=======
   <li><a href="#dom-powerpreference-low-power">"low-power"</a><span>, in §3.6</span>
>>>>>>> Update according to feedbacks and to align more closely with WebGL.
   <li><a href="#ml">ML</a><span>, in §3.2</span>
   <li><a href="#dom-navigator-ml">ml</a><span>, in §3.1</span>
   <li><a href="#model">Model</a><span>, in §3.6</span>
   <li><a href="#dom-neuralnetworkcontext-mul">mul(a, b)</a><span>, in §3.5.4</span>
   <li><a href="#dom-operandlayout-nchw">"nchw"</a><span>, in §3.3</span>
   <li><a href="#neuralnetworkcontext">NeuralNetworkContext</a><span>, in §3.5</span>
   <li><a href="#dom-operandlayout-nhwc">"nhwc"</a><span>, in §3.3</span>
   <li><a href="#operand">Operand</a><span>, in §3.4</span>
   <li><a href="#dictdef-operanddescriptor">OperandDescriptor</a><span>, in §3.3</span>
   <li><a href="#enumdef-operandlayout">OperandLayout</a><span>, in §3.3</span>
   <li><a href="#enumdef-operandtype">OperandType</a><span>, in §3.3</span>
   <li><a href="#enumdef-powerpreference">PowerPreference</a><span>, in §3.6</span>
   <li><a href="#dom-compilationoptions-powerpreference">powerPreference</a><span>, in §3.6</span>
   <li><a href="#dom-operanddescriptor-scale">scale</a><span>, in §3.3</span>
   <li><a href="#dom-execution-setinput">setInput(index, data)</a><span>, in §3.8</span>
   <li><a href="#dom-execution-setoutput">setOutput(index, data)</a><span>, in §3.8</span>
   <li><a href="#dom-execution-startcompute">startCompute()</a><span>, in §3.8</span>
   <li><a href="#dom-operandtype-tensor-float16">"tensor-float16"</a><span>, in §3.3</span>
   <li><a href="#dom-operandtype-tensor-float32">"tensor-float32"</a><span>, in §3.3</span>
   <li><a href="#dom-operandtype-tensor-int32">"tensor-int32"</a><span>, in §3.3</span>
   <li><a href="#dom-operandtype-tensor-quant8-asymm">"tensor-quant8-asymm"</a><span>, in §3.3</span>
   <li><a href="#dom-operanddescriptor-type">type</a><span>, in §3.3</span>
   <li><a href="#dom-operandtype-uint32">"uint32"</a><span>, in §3.3</span>
   <li><a href="#dom-operanddescriptor-zeropoint">zeroPoint</a><span>, in §3.3</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-navigator">
   <a href="https://html.spec.whatwg.org/multipage/system-state.html#navigator">https://html.spec.whatwg.org/multipage/system-state.html#navigator</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigator">3.1. Navigator</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-ArrayBufferView">
   <a href="https://heycam.github.io/webidl/#ArrayBufferView">https://heycam.github.io/webidl/#ArrayBufferView</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ArrayBufferView">3.5. NeuralNetworkContext</a>
    <li><a href="#ref-for-ArrayBufferView①">3.8. Execution</a> <a href="#ref-for-ArrayBufferView②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-float">
   <a href="https://heycam.github.io/webidl/#idl-float">https://heycam.github.io/webidl/#idl-float</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-float">3.3. OperandDescriptor</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-long">
   <a href="https://heycam.github.io/webidl/#idl-long">https://heycam.github.io/webidl/#idl-long</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-long">3.3. OperandDescriptor</a> <a href="#ref-for-idl-long①">(2)</a>
    <li><a href="#ref-for-idl-long②">3.5.2. conv2d</a> <a href="#ref-for-idl-long③">(2)</a> <a href="#ref-for-idl-long④">(3)</a> <a href="#ref-for-idl-long⑤">(4)</a> <a href="#ref-for-idl-long⑥">(5)</a> <a href="#ref-for-idl-long⑦">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-unsigned-long">
   <a href="https://heycam.github.io/webidl/#idl-unsigned-long">https://heycam.github.io/webidl/#idl-unsigned-long</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-unsigned-long">3.8. Execution</a> <a href="#ref-for-idl-unsigned-long①">(2)</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-navigator" style="color:initial">Navigator</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WebIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-ArrayBufferView" style="color:initial">ArrayBufferView</span>
     <li><span class="dfn-paneled" id="term-for-idl-float" style="color:initial">float</span>
     <li><span class="dfn-paneled" id="term-for-idl-long" style="color:initial">long</span>
     <li><span class="dfn-paneled" id="term-for-idl-unsigned-long" style="color:initial">unsigned long</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-numpy-broadcasting-rule">[NUMPY-BROADCASTING-RULE]
   <dd>The SciPy community. <a href="https://docs.scipy.org/doc/numpy/user/basics.broadcasting.html#general-broadcasting-rules">General Broadcasting Rules of NumPy</a>. July 2019. URL: <a href="https://docs.scipy.org/doc/numpy/user/basics.broadcasting.html#general-broadcasting-rules">https://docs.scipy.org/doc/numpy/user/basics.broadcasting.html#general-broadcasting-rules</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-webidl">[WebIDL]
   <dd>Boris Zbarsky. <a href="https://heycam.github.io/webidl/">Web IDL</a>. 15 December 2016. ED. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-contextualloss">[ContextualLoss]
   <dd>Roey Mechrez; Itamar Talmi; Lihi Zelnik-Manor. <a href="https://arxiv.org/abs/1803.02077">The Contextual Loss for Image Transformation with Non-Aligned Data</a>. July 2018. URL: <a href="https://arxiv.org/abs/1803.02077">https://arxiv.org/abs/1803.02077</a>
   <dt id="biblio-deeplabv3">[DeepLabv3+]
   <dd>Liang-Chieh Chen; et al. <a href="https://arxiv.org/abs/1802.02611">Encoder-Decoder with Atrous Separable Convolution for Semantic Image Segmentation</a>. August 2018. URL: <a href="https://arxiv.org/abs/1802.02611">https://arxiv.org/abs/1802.02611</a>
   <dt id="biblio-deepmoji">[DeepMoji]
   <dd>Bjarke Felbo; et al. <a href="https://arxiv.org/abs/1708.00524">Using millions of emoji occurrences to learn any-domain representations for detecting sentiment, emotion and sarcasm</a>. October 2017. URL: <a href="https://arxiv.org/abs/1708.00524">https://arxiv.org/abs/1708.00524</a>
   <dt id="biblio-elu">[ELU]
   <dd>Djork-Arné Clevert; Thomas Unterthiner; Sepp Hochreiter. <a href="https://arxiv.org/abs/1511.07289">Fast and Accurate Deep Network Learning by Exponential Linear Units (ELUs)</a>. February 2016. URL: <a href="https://arxiv.org/abs/1511.07289">https://arxiv.org/abs/1511.07289</a>
   <dt id="biblio-facenet">[FaceNet]
   <dd>Florian Schroff; Dmitry Kalenichenko; James Philbin. <a href="https://arxiv.org/abs/1503.03832">FaceNet: A Unified Embedding for Face Recognition and Clustering</a>. June 2015. URL: <a href="https://arxiv.org/abs/1503.03832">https://arxiv.org/abs/1503.03832</a>
   <dt id="biblio-fan">[FAN]
   <dd>Adrian Bulat; Georgios Tzimiropoulos. <a href="https://arxiv.org/abs/1703.07332">How far are we from solving the 2D &amp; 3D Face Alignment problem? (and a dataset of 230,000 3D facial landmarks)</a>. September 2017. URL: <a href="https://arxiv.org/abs/1703.07332">https://arxiv.org/abs/1703.07332</a>
   <dt id="biblio-gnmt">[GNMT]
   <dd>Minh-Thang Luong; Eugene Brevdo; Rui Zhao. <a href="https://github.com/tensorflow/nmt">Neural Machine Translation (seq2seq) Tutorial</a>. May 2017. URL: <a href="https://github.com/tensorflow/nmt">https://github.com/tensorflow/nmt</a>
   <dt id="biblio-im2txt">[IM2TXT]
   <dd>Oriol Vinyals; et al. <a href="https://arxiv.org/abs/1609.06647">Show and Tell: Lessons learned from the 2015 MSCOCO Image Captioning Challenge</a>. September 2016. URL: <a href="https://arxiv.org/abs/1609.06647">https://arxiv.org/abs/1609.06647</a>
   <dt id="biblio-leakyrelu">[LeakyReLU]
   <dd>Andrew L. Maas; Awni Y. Hannun; Andrew Y. Ng. <a href="https://pdfs.semanticscholar.org/367f/2c63a6f6a10b3b64b8729d601e69337ee3cc.pdf">Rectifier Nonlinearities Improve Neural Network Acoustic Models</a>. June 2013. URL: <a href="https://pdfs.semanticscholar.org/367f/2c63a6f6a10b3b64b8729d601e69337ee3cc.pdf">https://pdfs.semanticscholar.org/367f/2c63a6f6a10b3b64b8729d601e69337ee3cc.pdf</a>
   <dt id="biblio-maskr-cnn">[MaskR-CNN]
   <dd>Kaiming He; et al. <a href="https://arxiv.org/abs/1703.06870">Mask R-CNN</a>. January 2018. URL: <a href="https://arxiv.org/abs/1703.06870">https://arxiv.org/abs/1703.06870</a>
   <dt id="biblio-opennmt">[OpenNMT]
   <dd>Guillaume Klein; et al. <a href="https://arxiv.org/abs/1701.02810">OpenNMT: Open-Source Toolkit for Neural Machine Translation</a>. March 2017. URL: <a href="https://arxiv.org/abs/1701.02810">https://arxiv.org/abs/1701.02810</a>
   <dt id="biblio-pairedcyclegan">[PairedCycleGAN]
   <dd>Huiwen Chang; et al. <a href="http://openaccess.thecvf.com/content_cvpr_2018/html/Chang_PairedCycleGAN_Asymmetric_Style_CVPR_2018_paper.html">PairedCycleGAN: Asymmetric Style Transfer for Applying and Removing Makeup</a>. June 2018. URL: <a href="http://openaccess.thecvf.com/content_cvpr_2018/html/Chang_PairedCycleGAN_Asymmetric_Style_CVPR_2018_paper.html">http://openaccess.thecvf.com/content_cvpr_2018/html/Chang_PairedCycleGAN_Asymmetric_Style_CVPR_2018_paper.html</a>
   <dt id="biblio-posenet">[PoseNet]
   <dd>Dan Oved. <a href="https://medium.com/tensorflow/real-time-human-pose-estimation-in-the-browser-with-tensorflow-js-7dd0bc881cd5">Real-time Human Pose Estimation in the Browser with TensorFlow.js</a>. May 2018. URL: <a href="https://medium.com/tensorflow/real-time-human-pose-estimation-in-the-browser-with-tensorflow-js-7dd0bc881cd5">https://medium.com/tensorflow/real-time-human-pose-estimation-in-the-browser-with-tensorflow-js-7dd0bc881cd5</a>
   <dt id="biblio-srgan">[SRGAN]
   <dd>Christian Ledig; et al. <a href="https://arxiv.org/abs/1609.04802">Photo-Realistic Single Image Super-Resolution Using a Generative Adversarial Network</a>. May 2017. URL: <a href="https://arxiv.org/abs/1609.04802">https://arxiv.org/abs/1609.04802</a>
   <dt id="biblio-ssd">[SSD]
   <dd>Wei Liu; et al. <a href="https://arxiv.org/abs/1512.02325">SSD: Single Shot MultiBox Detector</a>. December 2016. URL: <a href="https://arxiv.org/abs/1512.02325">https://arxiv.org/abs/1512.02325</a>
   <dt id="biblio-video-summarization-with-lstm">[Video-Summarization-with-LSTM]
   <dd>Ke Zhang; et al. <a href="http://www-scf.usc.edu/~zhan355/ke_eccv2016.pdf">Video summarization with long short-term memory</a>. October 2016. URL: <a href="http://www-scf.usc.edu/~zhan355/ke_eccv2016.pdf">http://www-scf.usc.edu/~zhan355/ke_eccv2016.pdf</a>
   <dt id="biblio-yolo">[YOLO]
   <dd>Joseph Redmon; et al. <a href="https://arxiv.org/abs/1506.02640">You Only Look Once: Unified, Real-Time Object Detection</a>. May 2016. URL: <a href="https://arxiv.org/abs/1506.02640">https://arxiv.org/abs/1506.02640</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator"><c- g>Navigator</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="#ml"><c- n>ML</c-></a> <a data-readonly data-type="ML" href="#dom-navigator-ml"><code><c- g>ml</c-></code></a>;
};

<c- b>interface</c-> <a href="#ml"><code><c- g>ML</c-></code></a> {
<<<<<<< HEAD
  <a class="n" data-link-type="idl-name" href="#neuralnetworkcontext" id="ref-for-neuralnetworkcontext⑤"><c- n>NeuralNetworkContext</c-></a> <a href="#dom-ml-getneuralnetworkcontext"><code><c- g>getNeuralNetworkContext</c-></code></a>();
=======
  <a class="n" data-link-type="idl-name" href="#neuralnetworkcontext"><c- n>NeuralNetworkContext</c-></a> <a href="#dom-ml-getneuralnetworkcontext"><code><c- g>getNeuralNetworkContext</c-></code></a>();
>>>>>>> Update according to feedbacks and to align more closely with WebGL.
};

<c- b>enum</c-> <a href="#enumdef-operandlayout"><code><c- g>OperandLayout</c-></code></a> {
  <a href="#dom-operandlayout-nchw"><code><c- s>"nchw"</c-></code></a>,
  <a href="#dom-operandlayout-nhwc"><code><c- s>"nhwc"</c-></code></a>
};

<c- b>enum</c-> <a href="#enumdef-operandtype"><code><c- g>OperandType</c-></code></a> {
  <a href="#dom-operandtype-float32"><code><c- s>"float32"</c-></code></a>,
  <a href="#dom-operandtype-float16"><code><c- s>"float16"</c-></code></a>,
  <a href="#dom-operandtype-int32"><code><c- s>"int32"</c-></code></a>,
  <a href="#dom-operandtype-uint32"><code><c- s>"uint32"</c-></code></a>,
  <a href="#dom-operandtype-tensor-float32"><code><c- s>"tensor-float32"</c-></code></a>,
  <a href="#dom-operandtype-tensor-float16"><code><c- s>"tensor-float16"</c-></code></a>,
  <a href="#dom-operandtype-tensor-int32"><code><c- s>"tensor-int32"</c-></code></a>,
  <a href="#dom-operandtype-tensor-quant8-asymm"><code><c- s>"tensor-quant8-asymm"</c-></code></a>
};

<c- b>dictionary</c-> <a href="#dictdef-operanddescriptor"><code><c- g>OperandDescriptor</c-></code></a> {
  // The operand type.
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#enumdef-operandtype"><c- n>OperandType</c-></a> <a data-type="OperandType " href="#dom-operanddescriptor-type"><code><c- g>type</c-></code></a>;

  // The dimensions field is only required for tensor operands.
  // The negative value means an unknown dimension.
  <c- b>sequence</c->&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-long"><c- b>long</c-></a>> <a data-type="sequence<long> " href="#dom-operanddescriptor-dimensions"><code><c- g>dimensions</c-></code></a>;

  // The following two fields are only required for quantized operand.
  // scale: an non-negative floating point value
  // zeroPoint: an integer, in range [0, 255]
  // The real value is (value - zeroPoint) * scale
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float"><c- b>float</c-></a> <a data-type="float " href="#dom-operanddescriptor-scale"><code><c- g>scale</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-long"><c- b>long</c-></a> <a data-type="long " href="#dom-operanddescriptor-zeropoint"><code><c- g>zeroPoint</c-></code></a>;
};

<c- b>interface</c-> <a href="#operand"><code><c- g>Operand</c-></code></a> {};

<c- b>interface</c-> <a href="#neuralnetworkcontext"><code><c- g>NeuralNetworkContext</c-></code></a> {
  // Create an Operand object that represents a model input.
<<<<<<< HEAD
  <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand②②"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-input"><code><c- g>input</c-></code></a>(<a class="n" data-link-type="idl-name" href="#dictdef-operanddescriptor" id="ref-for-dictdef-operanddescriptor②"><c- n>OperandDescriptor</c-></a> <a href="#dom-neuralnetworkcontext-input-desc-desc"><code><c- g>desc</c-></code></a>);

  // Create an Operand object that represents a model constant.
  <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand①①⓪"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-constant"><code><c- g>constant</c-></code></a>(<a class="n" data-link-type="idl-name" href="#dictdef-operanddescriptor" id="ref-for-dictdef-operanddescriptor①①"><c- n>OperandDescriptor</c-></a> <a href="#dom-neuralnetworkcontext-constant-desc-value-desc"><code><c- g>desc</c-></code></a>, <a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#ArrayBufferView" id="ref-for-ArrayBufferView③"><c- n>ArrayBufferView</c-></a> <a href="#dom-neuralnetworkcontext-constant-desc-value-value"><code><c- g>value</c-></code></a>);
=======
  <a class="n" data-link-type="idl-name" href="#operand"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-input"><code><c- g>input</c-></code></a>(<a class="n" data-link-type="idl-name" href="#dictdef-operanddescriptor"><c- n>OperandDescriptor</c-></a> <a href="#dom-neuralnetworkcontext-input-desc-desc"><code><c- g>desc</c-></code></a>);

  // Create an Operand object that represents a model constant.
  <a class="n" data-link-type="idl-name" href="#operand"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-constant"><code><c- g>constant</c-></code></a>(<a class="n" data-link-type="idl-name" href="#dictdef-operanddescriptor"><c- n>OperandDescriptor</c-></a> <a href="#dom-neuralnetworkcontext-constant-desc-value-desc"><code><c- g>desc</c-></code></a>, <a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#ArrayBufferView"><c- n>ArrayBufferView</c-></a> <a href="#dom-neuralnetworkcontext-constant-desc-value-value"><code><c- g>value</c-></code></a>);
>>>>>>> Update according to feedbacks and to align more closely with WebGL.

  // Create a Model object by identifying output operands.
  <c- b>Promise</c->&lt;<a class="n" data-link-type="idl-name" href="#model"><c- n>Model</c-></a>> <a href="#dom-neuralnetworkcontext-createmodel"><code><c- g>createModel</c-></code></a>(<c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="#operand"><c- n>Operand</c-></a>> <a href="#dom-neuralnetworkcontext-createmodel-outputs-outputs"><code><c- g>outputs</c-></code></a>);
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#neuralnetworkcontext"><c- g>NeuralNetworkContext</c-></a> {
  // Create an Operand object that represents the result of an element-wise
  // binary addition operation with input operands a and b.
  <a class="n" data-link-type="idl-name" href="#operand"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-add"><code><c- g>add</c-></code></a>(<a class="n" data-link-type="idl-name" href="#operand"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-add-a-b-a"><code><c- g>a</c-></code></a>, <a class="n" data-link-type="idl-name" href="#operand"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-add-a-b-b"><code><c- g>b</c-></code></a>);
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#neuralnetworkcontext"><c- g>NeuralNetworkContext</c-></a> {
  <a class="n" data-link-type="idl-name" href="#operand"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-conv2d"><code><c- g>conv2d</c-></code></a>(<a class="n" data-link-type="idl-name" href="#operand"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-input"><code><c- g>input</c-></code></a>, <a class="n" data-link-type="idl-name" href="#operand"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-filter"><code><c- g>filter</c-></code></a>,
                 <c- b>sequence</c->&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-long"><c- b>long</c-></a>> <a href="#dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-padding"><code><c- g>padding</c-></code></a>, <c- b>sequence</c->&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-long"><c- b>long</c-></a>> <a href="#dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-strides"><code><c- g>strides</c-></code></a>, <c- b>sequence</c->&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-long"><c- b>long</c-></a>> <a href="#dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-dilations"><code><c- g>dilations</c-></code></a>,
                 <c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#enumdef-operandlayout"><c- n>OperandLayout</c-></a> <a href="#dom-neuralnetworkcontext-conv2d-input-filter-padding-strides-dilations-layout-layout"><code><c- g>layout</c-></code></a> = "nchw");
};

<<<<<<< HEAD
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#neuralnetworkcontext" id="ref-for-neuralnetworkcontext③①"><c- g>NeuralNetworkContext</c-></a> {
  <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand①②①"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-matmul"><code><c- g>matmul</c-></code></a>(<a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand①③①"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-matmul-a-b-a"><code><c- g>a</c-></code></a>, <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand①④①"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-matmul-a-b-b"><code><c- g>b</c-></code></a>);
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#neuralnetworkcontext" id="ref-for-neuralnetworkcontext④①"><c- g>NeuralNetworkContext</c-></a> {
  // Create an Operand object that represents the result of an element-wise
  // binary multiplication operation with input operands a and b.
  <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand①⑧①"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-mul"><code><c- g>mul</c-></code></a>(<a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand①⑨①"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-mul-a-b-a"><code><c- g>a</c-></code></a>, <a class="n" data-link-type="idl-name" href="#operand" id="ref-for-operand②⓪①"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-mul-a-b-b"><code><c- g>b</c-></code></a>);
=======
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#neuralnetworkcontext"><c- g>NeuralNetworkContext</c-></a> {
  // Create an Operand object that represents the result of an element-wise
  // binary multiplication operation with input operands a and b.
  <a class="n" data-link-type="idl-name" href="#operand"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-mul"><code><c- g>mul</c-></code></a>(<a class="n" data-link-type="idl-name" href="#operand"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-mul-a-b-a"><code><c- g>a</c-></code></a>, <a class="n" data-link-type="idl-name" href="#operand"><c- n>Operand</c-></a> <a href="#dom-neuralnetworkcontext-mul-a-b-b"><code><c- g>b</c-></code></a>);
>>>>>>> Update according to feedbacks and to align more closely with WebGL.
};

<c- b>enum</c-> <a href="#enumdef-powerpreference"><code><c- g>PowerPreference</c-></code></a> {
  // Prioritizes execution speed over other considerations e.g. power consumption
  <a href="#dom-powerpreference-high-performance"><code><c- s>"high-performance"</c-></code></a>,
  // Prioritizes power consumption over other consideraions e.g. execution speed
  <a href="#dom-powerpreference-low-power"><code><c- s>"low-power"</c-></code></a>
};

<c- b>dictionary</c-> <a href="#dictdef-compilationoptions"><code><c- g>CompilationOptions</c-></code></a> {
  // Compilation preference as related to power consumption level
  <a class="n" data-link-type="idl-name" href="#enumdef-powerpreference"><c- n>PowerPreference</c-></a> <a data-type="PowerPreference " href="#dom-compilationoptions-powerpreference"><code><c- g>powerPreference</c-></code></a>;
};

<c- b>interface</c-> <a href="#model"><code><c- g>Model</c-></code></a> {
  <c- b>Promise</c->&lt;<a class="n" data-link-type="idl-name" href="#compilation"><c- n>Compilation</c-></a>> <a href="#dom-model-createcompilation"><code><c- g>createCompilation</c-></code></a>(<c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-compilationoptions"><c- n>CompilationOptions</c-></a> <a href="#dom-model-createcompilation-options-options"><code><c- g>options</c-></code></a> = {});
};

<c- b>interface</c-> <a href="#compilation"><code><c- g>Compilation</c-></code></a> {
  <c- b>Promise</c->&lt;<a class="n" data-link-type="idl-name" href="#execution"><c- n>Execution</c-></a>> <a href="#dom-compilation-createexecution"><code><c- g>createExecution</c-></code></a>();
};

<c- b>interface</c-> <a href="#execution"><code><c- g>Execution</c-></code></a> {
  <c- b>void</c-> <a href="#dom-execution-setinput"><code><c- g>setInput</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a href="#dom-execution-setinput-index-data-index"><code><c- g>index</c-></code></a>, <a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#ArrayBufferView"><c- n>ArrayBufferView</c-></a> <a href="#dom-execution-setinput-index-data-data"><code><c- g>data</c-></code></a>);
  <c- b>void</c-> <a href="#dom-execution-setoutput"><code><c- g>setOutput</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a href="#dom-execution-setoutput-index-data-index"><code><c- g>index</c-></code></a>, <a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#ArrayBufferView"><c- n>ArrayBufferView</c-></a> <a href="#dom-execution-setoutput-index-data-data"><code><c- g>data</c-></code></a>);
  <c- b>Promise</c->&lt;<c- b>void</c->> <a href="#dom-execution-startcompute"><code><c- g>startCompute</c-></code></a>();
};

</pre>
  <aside class="dfn-panel" data-for="ml">
   <b><a href="#ml">#ml</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ml">3.1. Navigator</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-operandlayout">
   <b><a href="#enumdef-operandlayout">#enumdef-operandlayout</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-operandlayout">3.5.2. conv2d</a> <a href="#ref-for-enumdef-operandlayout①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-operandtype">
   <b><a href="#enumdef-operandtype">#enumdef-operandtype</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-operandtype">3.3. OperandDescriptor</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-operanddescriptor">
   <b><a href="#dictdef-operanddescriptor">#dictdef-operanddescriptor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-operanddescriptor">3.5. NeuralNetworkContext</a> <a href="#ref-for-dictdef-operanddescriptor①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="operand">
   <b><a href="#operand">#operand</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-operand">3.5. NeuralNetworkContext</a> <a href="#ref-for-operand①">(2)</a> <a href="#ref-for-operand②">(3)</a>
    <li><a href="#ref-for-operand③">3.5.1. add</a> <a href="#ref-for-operand④">(2)</a> <a href="#ref-for-operand⑤">(3)</a>
    <li><a href="#ref-for-operand⑥">3.5.2. conv2d</a> <a href="#ref-for-operand⑦">(2)</a> <a href="#ref-for-operand⑧">(3)</a> <a href="#ref-for-operand⑨">(4)</a> <a href="#ref-for-operand①⓪">(5)</a> <a href="#ref-for-operand①①">(6)</a>
    <li><a href="#ref-for-operand①②">3.5.3. matmul</a> <a href="#ref-for-operand①③">(2)</a> <a href="#ref-for-operand①④">(3)</a> <a href="#ref-for-operand①⑤">(4)</a> <a href="#ref-for-operand①⑥">(5)</a> <a href="#ref-for-operand①⑦">(6)</a>
    <li><a href="#ref-for-operand①⑧">3.5.4. mul</a> <a href="#ref-for-operand①⑨">(2)</a> <a href="#ref-for-operand②⓪">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="neuralnetworkcontext">
   <b><a href="#neuralnetworkcontext">#neuralnetworkcontext</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-neuralnetworkcontext">3.2. ML</a>
    <li><a href="#ref-for-neuralnetworkcontext①">3.5.1. add</a>
    <li><a href="#ref-for-neuralnetworkcontext②">3.5.2. conv2d</a>
    <li><a href="#ref-for-neuralnetworkcontext③">3.5.3. matmul</a>
    <li><a href="#ref-for-neuralnetworkcontext④">3.5.4. mul</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-powerpreference">
   <b><a href="#enumdef-powerpreference">#enumdef-powerpreference</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-powerpreference">3.6. Model</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-compilationoptions">
   <b><a href="#dictdef-compilationoptions">#dictdef-compilationoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-compilationoptions">3.6. Model</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="model">
   <b><a href="#model">#model</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-model">3.5. NeuralNetworkContext</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="compilation">
   <b><a href="#compilation">#compilation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-compilation">3.6. Model</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="execution">
   <b><a href="#execution">#execution</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-execution">3.7. Compilation</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>